s:export OLDPIPE = ${&pipe-symbol||>pipe>} ;;
@ {user} unsetting pipe-symbol for testing ;;

s:option pipe-symbol ;;
assert -title=\s{Line number} \$(echo \${LINENO}) >test> = 1 ;;
assert -title=\s{Calc syntax} \$[3 + 3] >test> = 6 ;;
assert -title=\s{Advanced calc syntax} \$[\$(echo -D 1) * 5] >test> = 5 ;;
assert -title=\s{Option parsing} \$(opts -a -b -c -a=\\s{hi there}) >test> T= **a**: `hi there`
**b**: `true`
**c**: `true` ;;
assert -title=\s{Some pipes} \$(echo -D \$["this is neat"] \>pipe> rev) >test> T= taen si siht ;;

@ {user} setting pipe-symbol back ;;
s:option pipe-symbol ${OLDPIPE}
